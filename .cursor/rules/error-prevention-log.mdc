---
description: 关键错误预防 - agent 模式需要注意的操作
globs: 
alwaysApply: true
---
# 🚨 关键错误预防

## 📁 路径混淆
- **编辑前必须 `pwd` 确认目录**
- 根目录操作：`pnpm -r build`, `changeset`
- 包目录操作：`pnpm build`, `pnpm test`

## 🔧 Vite + Babel 冲突
- **JSX 语法错误**：esbuild 和 babel 同时处理导致
- **解决原则**：`jsx: 'preserve'` + 自定义 babel transform
- **配置方案**：根据使用的包选择对应配置（查看 demos/ 示例）

## 📝 重复创建避免
- **创建前检查 `demos/` 目录**
- 包名格式：`@fukict/{name}`
- 测试位置：`packages/{name}/tests/`

## 🔄 依赖管理
- **强制使用 pnpm**
- 类型导入：`import type` vs `import`

## ✅ 操作前检查
- [ ] `pwd` 确认目录
- [ ] 检查 `demos/` 已有功能
- [ ] 验证包名格式
- [ ] 确认配置一致性
- [ ] 不要擅自添加功能示例
