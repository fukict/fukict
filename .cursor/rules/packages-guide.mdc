---
description: package å¼€å‘æ¦‚è§ˆ
globs: ['packages/**/*']
alwaysApply: false
---
# ğŸ—ï¸ Fukict åŒ…å¼€å‘æŒ‡å—

## ğŸ“¦ åŒ…ç»“æ„ & æ„å»º
- `@fukict/core` - æ¸²æŸ“å¼•æ“ < 10KB
- `@fukict/babel-plugin` - JSX ç¼–è¯‘ä¼˜åŒ–
- `@fukict/widget` - ç»„ä»¶èŒƒå¼  
- `@fukict/babel-preset-widget` - é›¶é…ç½®

## ğŸš€ æ„å»ºå‘½ä»¤
```bash
# å¿«é€Ÿæ„å»º
./scripts/build-package.sh --all --no-watch        # æ„å»ºæ‰€æœ‰åŒ…
./scripts/build-package.sh --pkg-name core --watch # ç›‘å¬å•åŒ…

# äº¤äº’æ¨¡å¼
./scripts/build-package.sh                         # é€‰æ‹©åŒ…å’Œæ¨¡å¼
```

## ğŸ—ï¸ åŒ…ç›®å½•ç»“æ„

packages/{name}/
â”œâ”€â”€ src/index.ts # ä¸»å¯¼å‡º
â”œâ”€â”€ tests/.test.ts # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ package.json # åŒ…é…ç½®
â”œâ”€â”€ tsup.config.ts # æ„å»ºé…ç½® (å¯é€‰)
â””â”€â”€ vitest.config.ts # æµ‹è¯•é…ç½®

## ğŸ¯ æ ¸å¿ƒåŒ…ç‰¹æ€§

### Core (/packages/core)
- **æ–‡ä»¶**: renderer.ts, jsx-runtime.ts, dom-utils.ts
- **åŠŸèƒ½**: VNode â†’ DOM è½¬æ¢, ç²¾ç¡®å·®å¼‚å¯¹æ¯”
- **è¾“å‡º**: ESM å¤šå…¥å£ (renderer, jsx-runtime ç­‰)

### Babel Plugin (/packages/babel-plugin)  
- **æ–‡ä»¶**: plugin.ts, utils.ts
- **åŠŸèƒ½**: JSX â†’ VNode ç¼–è¯‘æ—¶è½¬æ¢
- **è¾“å‡º**: ESM + CJS åŒæ ¼å¼

### Widget (/packages/widget)
- **æ–‡ä»¶**: class-widget.ts, functional-widget.ts
- **åŠŸèƒ½**: ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ, çŠ¶æ€ç®¡ç†
- **è¾“å‡º**: ESM å¤šå…¥å£

## ğŸ”§ å¼€å‘å·¥ä½œæµ
1. **tsdown**: ç»Ÿä¸€æ„å»ºå·¥å…·ï¼Œæ”¯æŒ watch æ¨¡å¼
2. **ç¯å¢ƒ**: watch=development, build=production  
3. **æµ‹è¯•**: `vitest` jsdom ç¯å¢ƒ
4. **éªŒè¯**: è‡ªåŠ¨åŒ…åéªŒè¯ (core|widget|babel-plugin|babel-preset-widget)

## âš¡ æ€§èƒ½è¦æ±‚
- Bundle < 10KB, ç¼–è¯‘æ—¶ä¼˜åŒ–
- ç²¾ç¡® DOM æ“ä½œ, è‡ªåŠ¨æ¸…ç†
- Tree Shaking æ”¯æŒ
- 100% TypeScript è¦†ç›–